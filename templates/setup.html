{% extends "base.html" %}

{% block title %}ç«™é»è¨­å®š - {{ site_title }}{% endblock %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/setup.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/modal.css') }}">
{% endblock %}

{% block content %}
<div class="container">
    <header>
        <h1>ç«™é»è¨­å®š</h1>
        <a href="/" class="find-sites-link">(è¿”å›ä¸»é )</a>
    </header>

    <div class="card add-site-card">
        <div class="card-header">
            <h2>æ–°å¢ç«™é»</h2>
            <a href="https://www.google.com/search?q=inurl:/api.php/provide/vod/" target="_blank"
                class="find-sites-link" title="åœ¨ Google ä¸­æœå°‹ MacCMS ç«™é»">
                ğŸ” å°‹æ‰¾ç«™é»
            </a>
        </div>
        <div class="form-group">
            <label for="newSiteName">ç«™é»åç¨± (å¯é¸)</label>
            <input type="text" id="newSiteName" placeholder="ç•™ç©ºå°‡è‡ªå‹•ç”Ÿæˆ">
        </div>
        <div class="form-group">
            <label for="newSiteUrl">ç«™é»URL</label>
            <input type="text" id="newSiteUrl" placeholder="https://example.com" required>
        </div>
        <button id="addSiteBtn" class="btn btn-success">æ–°å¢ç«™é»</button>
    </div>

    <div class="site-list-manager">
        <h2>ç®¡ç†ç¾æœ‰ç«™é»</h2>
        <div class="site-controls">
            <button id="checkAllSitesBtn" class="btn btn-info">æª¢æŸ¥æ‰€æœ‰ç«™é»</button>
            <label class="checkbox-label">
                <input type="checkbox" id="includeDisabledCheckbox">
                <span>åŒ…å«æœªå•Ÿç”¨ç«™é»</span>
            </label>
            <div id="checkStatus" class="check-status"></div>
        </div>
        <ul id="siteList">
            <!-- ç«™é»åˆ—è¡¨å°‡ç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
        </ul>
    </div>

    <div class="card site-settings-card">
        <div class="card-header">
            <h2>ç¶²ç«™å¤–è§€è¨­å®š</h2>
        </div>
        <form id="siteSettingsForm" enctype="multipart/form-data">
            <div class="form-group">
                <label for="siteTitleInput">ç¶²ç«™æ¨™é¡Œ</label>
                <input type="text" id="siteTitleInput" name="site_title" placeholder="ç¶²ç«™æ¨™é¡Œ">
            </div>
            <div class="form-group">
                <label for="faviconInput">Favicon åœ–ç¤ºï¼ˆSVG/PNGï¼‰</label>
                <input type="file" id="faviconInput" name="favicon" accept="image/svg+xml,image/png">
                <div id="faviconPreview" style="margin-top:8px;"></div>
            </div>
            <button type="submit" class="btn btn-primary">å„²å­˜å¤–è§€è¨­å®š</button>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script type="module" src="{{ url_for('static', filename='js/modal.js') }}"></script>
<script type="module" src="{{ url_for('static', filename='js/setup.js') }}"></script>
{% endblock %}

<!-- body çµå°¾åŠ ä¸Šå½ˆçª—å®¹å™¨ -->
<div id="customModal"></div>